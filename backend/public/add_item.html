<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="main.css">
</head>
<body>


<form id="form">
  <div class="container">
    <h1>Register new product</h1>
    <p>Please fill in this form to add new product</p>
    <hr>

    <label for="sid">GSTIN :</label>
  <input type="text" id="sid" name="sid"><br>
  <label for="pid">product id:</label>
  <input type="text" id="pid" name="pid"><br>
  <label for="name">name:</label>
  <input type="text" id="name" name="name"><br>
  <label for="description">description:</label>
  <input type="text" id="description" name="description"><br>
  <label for="price">price:</label>
  <input type="text" id="price" name="price"><br>
    <hr>
    <label for="image">Upload:</label>
    <input type="file" id ="image" name="image"><br>
<button type="submit" class="registerbtn"">Submit</button>
  </div>

  
</form>


<script>
  function submit() {
    const data = new FormData(document.getElementById("form"));
    const img = document.getElementById("image").files[0];
    data.append('image', img);
    fetch('/add_item', {
      method: 'post',
      body: data
    }).then(() => {
      window.location.replace("/");
    });
  }
  document.getElementById('form').addEventListener('submit', function(e) {
    e.preventDefault();
    submit();
  });
  </script>
  
</body>
</html>